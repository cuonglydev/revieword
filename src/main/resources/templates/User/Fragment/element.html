<div th:fragment="head">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="/User/css/bootstrap.css">

  <link rel="stylesheet" href="/User/css/header.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/User/css/main.css">
  <link rel="stylesheet" href="/User/css/variables.css">
  <link rel="stylesheet" href="/User/css/footer.css"> 
</div>

<div th:fragment="header">
 <header class="bg-light shadow-sm d-flex align-items-center">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center">
        <a href="/index" class="d-flex align-items-center">
          <img class="logo-header" src="/User/assets/photo/media_1eeac4f414fef7a2538f45d131ecae95e859923d9.png">
        </a>

        <div class="large-content" th:if="${#authorization.expression('isAuthenticated()')}">

          <ul class="nav fw-medium">
            <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover mx-1 " aria-current="page"
                href="/index"><i class="fa-solid fa-house text-warning"></i> Trang chủ</a>
            </li>

            <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover mx-1" href="/booking"><i class="fa-solid fa-pager text-success"></i> Booking</a>
            </li>

            <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover mx-1 " href="/mission"><i class="fa-solid fa-notes-medical text-danger"></i> Nhiệm vụ</a>
            </li>

            <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover mx-1" href="https://t.me/lilcuong23" target="_blank"><i class="fa-solid fa-headset text-info"></i> Hỗ trợ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover ms-1" href="/account"><i class="fa-solid fa-user text-primary"></i> Tài khoản</a>
            </li>

          </ul>

        </div>
        
         <div class="large-content" th:if="${#authorization.expression('isAnonymous()')}">

          <ul class="nav fw-medium">
            <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover mx-1 " aria-current="page"
                href="/login"><i class="fa-solid fa-right-to-bracket text-primary"></i> Đăng nhập</a>
            </li> 
             <li class="nav-item">
              <a class="nav-link menu-item menu__item btn__orange__subtle__hover mx-1 " aria-current="page"
                href="/register"><i class="fa-solid fa-file-pen text-danger"></i> Đăng ký</a>
            </li>

          </ul>

        </div>

        <div class="medium-content">
          <button class="btn btn__orange" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu"
            aria-controls="offcanvasMenu"><i class="fa-solid fa-bars"></i></button>

          <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasMenuLabel"> <img class="logo-header" src="/User/assets/photo/media_1eeac4f414fef7a2538f45d131ecae95e859923d9.png"></h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <div class="list-group" th:if="${#authorization.expression('isAuthenticated()')}">
                <a href="/index.html" class="list-group-item list-group-item-action menu-item" aria-current="true">
                  Trang chủ
                </a>
                <a href="/booking" class="list-group-item list-group-item-action menu-item">Booking</a>
                <a href="/mission" class="list-group-item list-group-item-action menu-item">Nhiệm vụ</a>
                <a href="https://t.me/lilcuong23" target="_blank" class="list-group-item list-group-item-action menu-item">Hỗ trợ</a>
                <a href="/account" class="list-group-item list-group-item-action menu-item">Tài khoản</a>
              </div>
              
               <div class="list-group"  th:if="${#authorization.expression('isAnonymous()')}">
               
                <a href="/login" class="list-group-item list-group-item-action menu-item">Đăng nhập</a>
                <a href="/register" class="list-group-item list-group-item-action menu-item">Đăng ký</a>
              </div>
              
            </div>
          </div>
        </div>


      </div>
    </div>
  </header>
</div>

<div th:fragment="footer">
<footer  class="bg-dark mt-3">
    <div class="container">
      <div class="row py-2">
       <div class="col-md-6 col-12">
        <img class="logo-footer" src="/User/assets/photo/media_1eeac4f414fef7a2538f45d131ecae95e859923d9.png">
       </div>

        <div class="col-md-6 col-12 ">
          <ul class="nav fw-medium menu-footer">
            <li class="nav-item">
              <a class="nav-link  mx-1 text-light " aria-current="page"
                href="/index.html">FAQ</a>
            </li>

            <li class="nav-item">
              <a class="nav-link text-light " href="#">Miễn trừ trách nhiệm</a>
            </li>

            <li class="nav-item">
              <a class="nav-link text-light " href="#">item</a>
            </li>

            <li class="nav-item">
              <a class="nav-link text-light " href="#">item</a>
            </li>
          </ul>

        </div>
      </div>

      <div class="text-center">
        <i style="font-size: 11px;" class="text-light">COPYRIGHT © 2025 REVIEWORD.</i>
      </div>
    </div>

  </footer>

</div>

 <div th:fragment="toast">

	<div class="position-fixed top-0 end-0 p-3 " style="z-index: 1000">
		<div class="toast align-items-center text-bg-light border border-success-subtle mb-2 notice" role="alert"
			aria-live="assertive" aria-atomic="true" data-bs-delay="3000" th:if="${success != null}">
			<div class="toast-header">
        <i class="fa-solid fa-circle-check  me-2 text-success"></i>
        <strong class="me-auto text-success" >Thành công</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body ">
       <span th:text="${success}"></span>
      </div>
		</div>

		<div class="toast align-items-center text-bg-light border border-danger-subtle mb-2 notice" role="alert"
			aria-live="assertive" aria-atomic="true" data-bs-delay="3000" th:if="${danger != null}">
			<div class="toast-header">
        <i class="fa-solid fa-triangle-exclamation me-2 text-danger"></i>
        <strong class="me-auto text-danger" >Thất bại</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body ">
       <span th:text="${danger}"></span>
      </div>
		</div>
	</div>


	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// Initialize all toasts on the page
			const toastElements = document.querySelectorAll('.notice');
			toastElements.forEach(toastEl => {
				// Use Bootstrap's Toast API to show the toast
				const toast = new bootstrap.Toast(toastEl);
				toast.show();
			});
		});
	</script>
</div>

<div th:fragment="spinners">

<div id="spinner-overlay" style="display: none;">
  <div class="spinner-border text-secondary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<script>
  window.addEventListener("beforeunload", function () {
    document.getElementById("spinner-overlay").style.display = "flex";
  });

  window.addEventListener("load", function () {
    document.getElementById("spinner-overlay").style.display = "none";
  });
</script>
</div>

<div th:fragment="popups">
    <div id="popups-container">
        <div th:each="popup : ${activePopups}" th:if="${popup != null}" class="popup-notification shadow-lg" th:classappend="${popup.position}" style="display: none;">
            <div class="popup-header d-flex justify-content-between align-items-center">
                <h5 class="popup-title mb-0" th:text="${popup.title}">Tiêu đề thông báo</h5>
                <button type="button" class="btn-close" onclick="closePopup(this)"></button>
            </div>
            <div class="popup-body mt-2">
                <p class="mb-0" th:text="${popup.content}">Nội dung thông báo</p>
            </div>
        </div>
    </div>

    <style>
        .popup-notification {
            position: fixed;
            min-width: 300px;
            max-width: 400px;
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            z-index: 9999;
            transition: all 0.3s ease;
            font-family: 'Roboto', sans-serif;
        }

        .popup-notification.top-right {
            top: 20px;
            right: 20px;
        }

        .popup-notification.top-left {
            top: 20px;
            left: 20px;
        }

        .popup-notification.bottom-right {
            bottom: 20px;
            right: 20px;
        }

        .popup-notification.bottom-left {
            bottom: 20px;
            left: 20px;
        }

        .popup-notification.center {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .popup-title {
            color: #333;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .popup-body {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Animation classes */
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.3s ease forwards;
        }

        .slide-in-right {
            transform: translateX(100%);
            animation: slideInRight 0.3s ease forwards;
        }

        .slide-in-left {
            transform: translateX(-100%);
            animation: slideInLeft 0.3s ease forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @keyframes slideInRight {
            to { transform: translateX(0); }
        }

        @keyframes slideInLeft {
            to { transform: translateX(0); }
        }
    </style>

    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', function() {
            const popups = document.querySelectorAll('.popup-notification');
            
            popups.forEach((popup, index) => {
                setTimeout(() => {
                    showPopup(popup);
                }, index * 500); // Hiển thị lần lượt, cách nhau 500ms
            });
        });

        function showPopup(popup) {
            popup.style.display = 'block';
            const position = popup.classList.contains('center') ? 'fade-in' :
                           (popup.classList.contains('right') ? 'slide-in-right' : 'slide-in-left');
            popup.classList.add(position);

            // Tự động ẩn sau thời gian định sẵn (nếu có)
            const duration = popup.getAttribute('data-duration');
            if (duration) {
                setTimeout(() => {
                    closePopup(popup.querySelector('.btn-close'));
                }, duration * 1000);
            }
        }

        function closePopup(closeButton) {
            const popup = closeButton.closest('.popup-notification');
            popup.style.opacity = '0';
            setTimeout(() => {
                popup.style.display = 'none';
            }, 300);
        }
    </script>
</div>